#!/bin/bash

JSON_FILE="/path/to/your.json"  # Update this with the actual JSON file path

if [[ ! -f "$JSON_FILE" ]]; then
    echo "Error: JSON file not found at $JSON_FILE"
    exit 1
fi

echo "Executing version checks..."
echo "---------------------------------"

# Process each command in the JSON file
jq -r 'to_entries[] | "\(.key)@@\(.value.command)"' "$JSON_FILE" | while IFS='@@' read -r name cmd; do
    echo -n "$name: "
    result=$(bash -c "$cmd" 2>/dev/null)  # Execute command in a subshell

    if [[ -z "$result" ]]; then
        echo "Command failed or package not found"
    else
        echo "$result"
    fi
done

echo "---------------------------------"
echo "Done."
